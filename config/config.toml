[llm]
provider = "ollama"
model = "gpt-oss:latest"
base_url = "http://localhost:11434"
# api_key = ""
# embedding_model = "nomic-embed-text" # Optional: specify different model for embeddings

[memgraph]
uri = "bolt://memgraph:7687"
user = "" # default
# password = "" # set via env var MEMGRAPH_PASSWORD

[concurrency]
# Controls parallel execution for improved throughput
bulk_ingest = 5
bulk_search = 10

[extraction]
nodes = """
<ENTITY TYPES>
%s
</ENTITY TYPES>

<CURRENT MESSAGE>
%s
</CURRENT MESSAGE>

Instructions:
Extract entities mentioned in the CURRENT MESSAGE based on the ENTITY TYPES schema.
Return the result as a JSON object with a key "extracted_entities" which is a list of objects.
Each object should have:
- "name" (string)
- "entity_type_id" (int)
- "attributes" (dictionary, optional): Extract any relevant attributes or properties defined in the schema or implied by context.

Example JSON:
{
  "extracted_entities": [
    {
      "name": "John Doe", 
      "entity_type_id": 1,
      "attributes": {
        "age": 30,
        "occupation": "Engineer"
      }
    }
  ]
}
"""

edges = """
<NODES>
%s
</NODES>

Instructions:
Extract relationships between the provided nodes based on common knowledge or context.
Return the result as a JSON object with a key "extracted_edges" which is a list of objects.
Each object should have "source_node_uuid" (string), "target_node_uuid" (string), "relation_type" (string), and "fact" (string).

Example JSON:
{
  "extracted_edges": [
    {"source_node_uuid": "uuid-1", "target_node_uuid": "uuid-2", "relation_type": "FRIEND", "fact": "They are friends"}
  ]
}
"""

[deduplication]
nodes = """
<NEW NODES>
%s
</NEW NODES>

<EXISTING NODES>
%s
</EXISTING NODES>

Instructions:
Identify if any of the NEW NODES are duplicates of the EXISTING NODES.
Return a JSON object with key "duplicates" which is a list of objects.
Each object should have "original_uuid" (existing node UUID), "duplicate_uuid" (new node UUID), and "confidence" (float).

Example JSON:
{
  "duplicates": [
    {"original_uuid": "existing-1", "duplicate_uuid": "new-1", "confidence": 0.9}
  ]
}
"""

[summary]
nodes = """
<EXISTING SUMMARY>
%s
</EXISTING SUMMARY>

<NEW MENTIONS>
%s
</NEW MENTIONS>

Instructions:
Update the existing summary to incorporate the new information from the mentions.
Return the result as a JSON object with a single key "summary" (string).

Example JSON:
{
  "summary": "Alice is a software engineer living in Paris."
}
"""

communities = """
<COMMUNITY NODES>
%s
</COMMUNITY NODES>

Instructions:
Summarize the key information about this group of entities.
Return the result as a JSON object with a single key "summary" (string).

Example JSON:
{
  "summary": "High-level summary of the community."
}
"""

community_name = """
<COMMUNITY SUMMARY>
%s
</COMMUNITY SUMMARY>

Instructions:
Generate a short, descriptive name for this community based on its summary.
Return the result as a JSON object with a single key "name" (string).

Example JSON:
{
  "name": "Software Engineering Team"
}
"""
